{"version":3,"sources":["firebase.js","context/AuthContext.js","layout/PrivateRoute.js","layout/UnsignedRoute.js","pages/UpdateProfile.js","context/UserContext.js","layout/AppNavList.js","layout/Navigation.js","layout/Sidebar.js","components/useBreakpoint.js","layout/AppLayout.js","pages/LoginWithPhone.js","pages/Profile.js","pages/AllPlayers.js","pages/Games.js","components/GameThumbnail.js","pages/GameDetails.js","pages/ForgetPassword.js","pages/AdminPanel.js","App.js","index.js"],"names":["app","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","getAuth","getFirestore","AuthContext","React","createContext","AuthProvider","children","useState","loading","setLoading","authUser","setAuthUser","useEffect","onAuthStateChanged","user","value","signup","email","password","createUserWithEmailAndPassword","login","signInWithEmailAndPassword","logout","signOut","resetPassword","sendPasswordResetEmail","loginWithPhoneNumber","phoneNumber","window","recaptchaVerifier","RecaptchaVerifier","signInWithPhoneNumber","Provider","useAuth","useContext","PrivateRoute","replace","to","UnsignedRoute","FormikField","id","label","type","required","formik","rest","Form","Group","className","Label","Control","values","onChange","handleChange","onBlur","handleBlur","isInvalid","touched","errors","isValid","Feedback","FormikButton","defaultText","submittingText","Button","variant","isSubmitting","disabled","UpdateProfile","undefined","error","setError","firestore","useFirestore","ref","doc","uid","useFormik","initialValues","name","validateOnMount","validationSchema","Yup","min","onSubmit","formikBag","setDoc","joinedAt","metadata","createdAt","then","res","setSubmitting","catch","console","log","message","Container","style","position","top","left","minWidth","maxWidth","Card","Body","Alert","noValidate","handleSubmit","autoFocus","UserContext","UserProviderInt","ret","useFirestoreDocData","status","data","loaded","Spinner","animation","UserProvider","useFirestoreUser","AppNavList","navLinkClasses","Nav","Item","Link","eventKey","as","size","hidden","Navigator","location","useLocation","Navbar","Toggle","aria-controls","Collapse","activeKey","pathname","Navigation","brandOnly","bg","expand","collapseOnSelect","sticky","zIndex","fluid","Brand","Sidebar","width","paddingLeft","paddingRight","Dropdown","Divider","marginTop","getBreakpoint","Breakpoint","matchMedia","matches","useBreakpoint","setBreakpoint","resizeEvent","addEventListener","removeEventListener","AppLayout","bp","sidebarExtendedWidth","marginLeft","useFocus","htmlElRef","useRef","current","focus","FormikFieldWithPrefix","forwardRef","InputGroup","e","target","length","slice","Login","step","setStep","confirmationFn","setConfirmationFn","phoneNumberInputRef","setPhoneNumberInputFocus","verifCodeInputRef","setVerifCodeInputFocus","formikStep1","confirmFn","formikStep2","verificationCode","a","confirm","Tab","Content","Pane","inputMode","onClick","MaskedInput","mask","autoComplete","Dashboard","handleLogout","Text","Customers","collection","players","useFirestoreCollectionData","ListGroup","filter","p","sort","b","map","player","flexDirection","class","unix","fromNow","parseInt","float","navigate","useNavigate","games","showHiddenGames","g","game","registrationsStarted","moment","registrationStartDate","seconds","utc","isBefore","registrationsEnded","registrationEndDate","registrationState","registrationColor","Badge","text","pill","fontSize","maxPlayers","maxSubs","GameThumbnail","canvas","context","getContext","draw","roundedImage","x","y","height","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","image","Image","src","onload","imgw","ctx","shadowValues","box","posX","posY","boxW","boxH","offsetX","offsetY","blurRadius","spreadRadius","color","save","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","fillStyle","fill","clip","restore","boxShadow","offset","imgh","strokeStyle","lineWidth","globalAlpha","stroke","drawImage","font","offset2Quarters","topOffset","getPlayerName","substring","i","textAlign","strokeText","fillText","handleShare","toBlob","blob","files","File","navigator","canShare","Error","share","fmtTime","ts","fmt","tz","format","GameDetails","cid","useParams","actionInProgress","setActionInProgress","alreadyRegistered","some","isGameFull","registrationsLate","registrationLateDate","isAuthUserOrganizer","organizerId","handleShowCustomerAddModal","me","hist","runTransaction","transaction","get","gameRef","gameData","Promise","reject","update","arrayRemove","arrayUnion","history","description","date","Timestamp","now","lateCancellations","handleOnPayment","alreadyChecked","payments","includes","organizerEmail","role","aria-hidden","numbered","Array","from","keys","Check","checked","idx","nanoseconds","emailRef","setMessage","preventDefault","AdminPanel","success","setSuccess","handleNewGame","gameDate","regStartDate","add","regEndDate","organizerName","paymentPerPlayer","getDoc","exists","toDate","placeholder","App","exact","path","element","LoginWithPhone","ForgetPassword","Profile","AllPlayers","Games","FirebaseComponents","useFirebaseApp","database","sdk","ReactDOM","render","StrictMode","firebaseConfig","document","getElementById"],"mappings":"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","file":"static/js/main.935da83d.chunk.js","sourcesContent":["import { initializeApp } from \"firebase/app\";\r\nimport { getAuth } from \"firebase/auth\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTHDOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nexport const auth = getAuth(app);\r\nexport const db = getFirestore(app);\r\nexport default app;\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { auth } from \"../firebase\";\r\nimport { onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail, signOut,\r\n  RecaptchaVerifier, signInWithPhoneNumber  } from \"firebase/auth\";\r\n\r\nconst AuthContext = React.createContext();\r\n\r\n\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [loading, setLoading] = useState(true);\r\n  const [authUser, setAuthUser] = useState();\r\n\r\n  function signup(email, password) {\r\n    return createUserWithEmailAndPassword(auth, email, password);\r\n  }\r\n\r\n  const loginWithPhoneNumber = (phoneNumber) => {\r\n\r\n    // console.log(window.recaptchaVerifier);\r\n    if (!window.recaptchaVerifier)\r\n    {\r\n      window.recaptchaVerifier = new RecaptchaVerifier('sign-in-button', { 'size': 'invisible' }, auth);\r\n    }\r\n    // console.log(window.recaptchaVerifier);\r\n\r\n    return signInWithPhoneNumber(auth, phoneNumber, window.recaptchaVerifier);\r\n  }\r\n\r\n  const login = (email, password) => {\r\n    return signInWithEmailAndPassword(auth, email, password);\r\n  };\r\n\r\n  const logout = () => {\r\n    return signOut(auth);\r\n  };\r\n\r\n  const resetPassword = (email) => {\r\n    return sendPasswordResetEmail(auth, email);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = onAuthStateChanged(auth, (user) => {\r\n      setAuthUser(user);\r\n      setLoading(false);\r\n    });\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const value = {\r\n    authUser,\r\n    signup,\r\n    login,\r\n    logout,\r\n    resetPassword,\r\n    loginWithPhoneNumber,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}","import React from \"react\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nfunction PrivateRoute({ children }) {\r\n  const { authUser } = useAuth();\r\n  // console.log(authUser);\r\n\r\n  if (authUser) {\r\n    return children;\r\n  }\r\n\r\n  return <Navigate replace to=\"/login\" />;\r\n}\r\n\r\nexport default PrivateRoute;\r\n","import React from \"react\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nfunction UnsignedRoute({ children }) {\r\n  const { authUser } = useAuth();\r\n\r\n  if (!authUser) {\r\n    return children;\r\n  }\r\n\r\n  return <Navigate replace to=\"/games\" />;\r\n}\r\n\r\nexport default UnsignedRoute;\r\n","import React, { useState } from \"react\";\r\nimport { Form, Container, Card, Button, Alert } from \"react-bootstrap\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport { doc, setDoc } from 'firebase/firestore';\r\nimport { useFirestore } from 'reactfire';\r\n\r\nconst FormikField = ({id, label, type, required, formik, ...rest}) => {\r\n  return (\r\n    <Form.Group className=\"mt-2\">\r\n      <Form.Label>{label}</Form.Label>\r\n      <Form.Control\r\n        id={id}\r\n        type={type} \r\n        required={required}\r\n        value={formik.values[id]} \r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n        isInvalid={formik.touched[id] && formik.errors[id]}\r\n        isValid={formik.touched[id] && !formik.errors[id]}\r\n        {...rest}\r\n      ></Form.Control>\r\n      <Form.Control.Feedback type=\"invalid\">\r\n        {formik.errors[id]}\r\n      </Form.Control.Feedback>\r\n    </Form.Group>\r\n  )\r\n}\r\n\r\nconst FormikButton = ({id, formik, defaultText, submittingText}) => {\r\n  return (\r\n    <Button \r\n      type=\"submit\" \r\n      id={id}\r\n      className=\"w-100 mt-3\" \r\n      variant={!formik.isValid || formik.isSubmitting ? \"secondary\" : \"primary\"}\r\n      disabled={!formik.isValid || formik.isSubmitting}>\r\n      {formik.isSubmitting ? submittingText : defaultText}\r\n    </Button>\r\n  )\r\n}\r\n\r\nfunction UpdateProfile() {\r\n  const [error, setError] = useState(undefined);\r\n  const { authUser } = useAuth();\r\n  const firestore = useFirestore();\r\n  const ref = doc(firestore, `users/${authUser.uid}`);\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      name: '',\r\n    },\r\n    validateOnMount: true,\r\n    validationSchema: Yup.object({\r\n      name: Yup.string()\r\n        .min(3, 'Too short')\r\n        .required('Required'),\r\n    }),\r\n    onSubmit: (values, formikBag) => {\r\n      setError(undefined);\r\n      setDoc(ref, \r\n        {\r\n          name: values.name,\r\n          id: authUser.uid,\r\n          joinedAt: authUser.metadata.createdAt\r\n        })\r\n        .then((res) => {\r\n            formikBag.setSubmitting(false)\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          setError(error.message);\r\n          formikBag.setSubmitting(false)\r\n        });\r\n    },\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {/* <Navigation brandOnly/> */}\r\n      <Container\r\n        className=\"d-flex align-items-center justify-content-center app-mh-100\"\r\n        style={{ position: 'absolute', top: 0, left: 0, minWidth: \"100vw\" }}\r\n      >\r\n        <div className=\"w-100\" style={{ maxWidth: \"400px\" }}>\r\n          <Card>\r\n            <Card.Body>\r\n              <h2 className=\"text-center mb-4\">Complete Profile</h2>\r\n              {error && <Alert variant=\"danger\">{error}</Alert>}\r\n              <Form id=\"form-step2\" noValidate onSubmit={formik.handleSubmit}>\r\n                <FormikField \r\n                  autoFocus\r\n                  id=\"name\" \r\n                  label=\"First and last name\" \r\n                  type=\"text\" \r\n                  required \r\n                  formik={formik} />\r\n                <FormikButton defaultText=\"Save\" submittingText=\"Saving...\" formik={formik} />\r\n              </Form>\r\n            </Card.Body>\r\n          </Card>\r\n        </div>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UpdateProfile;\r\n","import React, { useContext } from \"react\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { doc } from 'firebase/firestore';\r\nimport { useFirestore, useFirestoreDocData } from 'reactfire';\r\nimport Spinner from 'react-bootstrap/Spinner';\r\nimport Container from 'react-bootstrap/Container';\r\nimport UpdateProfile from '../pages/UpdateProfile';\r\n\r\nconst UserContext = React.createContext();\r\n\r\nconst UserProviderInt = ({ children, authUser }) => {\r\n\r\n  const firestore = useFirestore();\r\n  console.log(firestore, authUser);\r\n\r\n  const ref = doc(firestore, 'users', authUser.uid);\r\n  const ret = useFirestoreDocData(ref);\r\n  const { status, data: user } = ret;\r\n  const loaded = user !== undefined;\r\n  \r\n  if (status === 'success' && !user) {\r\n    // user logged in but its profile not yet created in db\r\n    return (\r\n      <UpdateProfile />\r\n    )\r\n  }\r\n\r\n  const value = {\r\n    status, user\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider value={value}>\r\n      {!loaded && \r\n        <Container\r\n          className=\"d-flex align-items-center justify-content-center app-mh-100\"\r\n          style={{ position: 'absolute', top: 0, left: 0, minWidth: \"100vw\" }}\r\n        >\r\n          <Spinner animation=\"border\" variant=\"primary\" />\r\n        </Container>\r\n      }\r\n      {loaded && children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport function UserProvider({ children }) {\r\n  const { authUser } = useAuth();\r\n\r\n  if (authUser) {\r\n    // User is authenticated. \r\n    return <UserProviderInt children={children} authUser={authUser} />\r\n  }\r\n\r\n  //\r\n  // If no auth, then no user context as well.\r\n  //\r\n\r\n  const value = {\r\n    status: \"success\", user: undefined\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider value={value}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useFirestoreUser() {\r\n  return useContext(UserContext);\r\n}","import Nav from 'react-bootstrap/Nav';\r\nimport { Link } from 'react-router-dom';\r\nimport { BsGridFill, BsPersonFill, BsPeopleFill, BsGrid1X2Fill } from \"react-icons/bs\";\r\nimport { useFirestoreUser } from \"../context/UserContext\";\r\n\r\nimport './AppNavList.css'\r\n\r\nfunction AppNavList({navLinkClasses}) {\r\n  \r\n  const { user } = useFirestoreUser();\r\n\r\n  navLinkClasses = navLinkClasses || \"\";\r\n\r\n  return (\r\n    <>\r\n      <Nav.Item>\r\n        <Nav.Link eventKey=\"/games\" as={Link} to=\"/games\" className={`${navLinkClasses} app-nav-list`}>\r\n          <BsGridFill size={16} className=\"mr-2\"/>\r\n          Games\r\n          {/* <Badge bg=\"primary\" className=\"ml-2\" style={{color: 'white'}}>2</Badge> */}\r\n        </Nav.Link>\r\n      </Nav.Item>\r\n      <Nav.Item>\r\n        <Nav.Link eventKey=\"/allplayers\" as={Link} to=\"/allplayers\" className={`${navLinkClasses} app-nav-list`}>\r\n          <BsPeopleFill size={16} className=\"mr-2\"/>\r\n          All Players\r\n          {/* <Badge bg=\"primary\" className=\"ml-2\" style={{color: 'white'}}>2</Badge> */}\r\n        </Nav.Link>\r\n      </Nav.Item>\r\n      <Nav.Item>\r\n        <Nav.Link eventKey=\"/profile\" as={Link} to=\"/profile\" className={`${navLinkClasses} app-nav-list`}>\r\n          <BsPersonFill size={16} className=\"mr-2\"/>\r\n          My Profile\r\n          {/* <Badge bg=\"primary\" className=\"ml-2\" style={{color: 'white'}}>2</Badge> */}\r\n        </Nav.Link>\r\n      </Nav.Item>\r\n      \r\n      {user && user.hidden &&\r\n        <Nav.Item>\r\n          <Nav.Link eventKey=\"/admin\" as={Link} to=\"/admin\" className={`${navLinkClasses} app-nav-list`}>\r\n            <BsGrid1X2Fill size={16} className=\"mr-2\"/>\r\n            Admin Panel\r\n            {/* <Badge bg=\"primary\" className=\"ml-2\" style={{color: 'white'}}>2</Badge> */}\r\n          </Nav.Link>\r\n        </Nav.Item>\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AppNavList;","import Container from 'react-bootstrap/Container';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport AppNavList from \"./AppNavList\"\r\n\r\nimport './Navigation.css'\r\n\r\nfunction Navigator() {\r\n  const location = useLocation();\r\n\r\n  return ( \r\n    <>\r\n      <Navbar.Toggle aria-controls=\"navbar-nav\" />\r\n      <Navbar.Collapse id=\"navbar-nav\" className=\"justify-content-end\">\r\n        <Nav activeKey={location.pathname} className=\"me-auto\">\r\n          <AppNavList navLinkClasses=\"nav-items d-md-none\" />\r\n        </Nav>\r\n      </Navbar.Collapse>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction Navigation({brandOnly}) {\r\n  return (\r\n    <Navbar bg=\"white\" expand=\"md\" collapseOnSelect=\"true\" sticky=\"top\" style={{zIndex: 1000}}>\r\n      <Container fluid>\r\n        <Navbar.Brand as={Link} to=\"/\">ACADIA SOCCER</Navbar.Brand>\r\n\r\n        {!brandOnly && <Navigator />}\r\n      </Container>\r\n    </Navbar>\r\n  );\r\n}\r\n\r\nexport default Navigation;","import Nav from 'react-bootstrap/Nav';\r\nimport Dropdown from 'react-bootstrap/Dropdown';\r\nimport { useLocation } from 'react-router-dom';\r\nimport AppNavList from \"./AppNavList\"\r\n\r\nfunction Sidebar({width}) {\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <>\r\n      <Nav \r\n        activeKey={location.pathname} \r\n        className=\"flex-column d-none d-md-block\" \r\n        style={{\r\n          width: width, \r\n          paddingLeft: '8px', \r\n          paddingRight: '8px', \r\n          position: 'fixed'\r\n        }}\r\n      >\r\n        <Dropdown.Divider style={{marginTop: 0}}/>\r\n\r\n        <AppNavList />\r\n      </Nav>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Sidebar;","import { useState, useEffect } from 'react';\r\n\r\nconst useBreakpoint = () => {\r\n  const [Breakpoint, setBreakpoint] = useState(getBreakpoint());\r\n\r\n  const resizeEvent = () => {\r\n    setBreakpoint(getBreakpoint())\r\n  }\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('resize', resizeEvent);\r\n    return () => {\r\n      window.removeEventListener('resize', resizeEvent);\r\n    };\r\n  }, [])\r\n\r\n  return Breakpoint;\r\n}\r\n\r\nconst getBreakpoint = () => {\r\n  let Breakpoint = null;\r\n\r\n  if (typeof window !== 'undefined') {\r\n    if (window.matchMedia('(min-width: 1400px)').matches) {\r\n      Breakpoint = 'xxl';\r\n    } else if (window.matchMedia('(min-width: 1200px)').matches) {\r\n      Breakpoint = 'xl';\r\n    } else if (window.matchMedia('(min-width: 992px)').matches) {\r\n      Breakpoint = 'lg';\r\n    } else if (window.matchMedia('(min-width: 768px)').matches) {\r\n      Breakpoint = 'md';\r\n    } else if (window.matchMedia('(min-width: 576px)').matches) {\r\n      Breakpoint = 'sm';\r\n    } else {\r\n      Breakpoint = 'xs';\r\n    }\r\n  }\r\n\r\n  return Breakpoint;\r\n}\r\n\r\nexport default useBreakpoint;","import { Outlet } from \"react-router-dom\";\r\nimport Container from 'react-bootstrap/Container';\r\nimport Navigation from \"./Navigation\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport useBreakpoint from '../components/useBreakpoint'\r\n\r\nconst AppLayout = () => {\r\n\r\n  const bp = useBreakpoint();\r\n  const sidebarExtendedWidth = (bp === 'sm' || bp === 'xs') ? 0 : 200;\r\n  // const sidebarCollapsedWidth = '48px';\r\n\r\n  return (\r\n    <>\r\n      <Navigation />\r\n      <Sidebar width={sidebarExtendedWidth}/>\r\n      <Container \r\n        className=\"app-container\"\r\n        style={{\r\n          marginLeft: sidebarExtendedWidth === 0 ? 'auto' : `${sidebarExtendedWidth}px`, \r\n          width: `calc(100% - ${sidebarExtendedWidth}px)`,\r\n          maxWidth: `calc(100% - ${sidebarExtendedWidth}px)`,\r\n        }}\r\n      >\r\n        <Outlet />\r\n      </Container>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AppLayout;","import React, { useState, useRef } from \"react\";\r\nimport { Form, Container, Card, Button, Alert, Tab, InputGroup } from \"react-bootstrap\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport Navigation from '../layout/Navigation';\r\nimport { useFormik } from 'formik';\r\nimport * as Yup from 'yup';\r\nimport MaskedInput from \"react-maskedinput\";  \r\n\r\nconst useFocus = () => {\r\n  const htmlElRef = useRef(null)\r\n  const setFocus = () => {htmlElRef.current &&  htmlElRef.current.focus()}\r\n\r\n  return [ htmlElRef, setFocus ] \r\n}\r\n\r\nconst FormikFieldWithPrefix = React.forwardRef(({id, label, type, required, formik, ...rest}, ref) => {\r\n  return (\r\n    <Form.Group className=\"mt-2\">\r\n      <Form.Label>{label}</Form.Label>\r\n      <InputGroup className=\"mb-3\">\r\n        <Form.Control\r\n          id={id}\r\n          ref={ref}\r\n          type={type} \r\n          required={required}\r\n          value={'+' + formik.values[id]} \r\n          onChange={(e) => {\r\n            if (e.target.value && e.target.value.length > 0)\r\n            {\r\n              e.target.value = e.target.value.slice(1);\r\n            }\r\n\r\n            formik.handleChange(e);\r\n          }}\r\n          onBlur={formik.handleBlur}\r\n          isInvalid={formik.touched[id] && formik.errors[id]}\r\n          isValid={formik.touched[id] && !formik.errors[id]}\r\n          {...rest}\r\n        ></Form.Control>\r\n      </InputGroup>\r\n      <Form.Control.Feedback type=\"invalid\">\r\n        {formik.errors[id]}\r\n      </Form.Control.Feedback>\r\n    </Form.Group>\r\n  )\r\n});\r\n\r\nconst FormikField = React.forwardRef(({id, label, type, required, formik, ...rest}, ref) => {\r\n  return (\r\n    <Form.Group className=\"mt-2\">\r\n      <Form.Label>{label}</Form.Label>\r\n      <Form.Control\r\n        id={id}\r\n        ref={ref}\r\n        type={type} \r\n        required={required}\r\n        value={formik.values[id]} \r\n        onChange={formik.handleChange}\r\n        onBlur={formik.handleBlur}\r\n        isInvalid={formik.touched[id] && formik.errors[id]}\r\n        isValid={formik.touched[id] && !formik.errors[id]}\r\n        {...rest}\r\n      ></Form.Control>\r\n      <Form.Control.Feedback type=\"invalid\">\r\n        {formik.errors[id]}\r\n      </Form.Control.Feedback>\r\n    </Form.Group>\r\n  )\r\n});\r\n\r\nconst FormikButton = ({id, formik, defaultText, submittingText}) => {\r\n  return (\r\n    <Button \r\n      type=\"submit\" \r\n      id={id}\r\n      className=\"w-100 mt-3\" \r\n      variant={!formik.isValid || formik.isSubmitting ? \"secondary\" : \"primary\"}\r\n      disabled={!formik.isValid || formik.isSubmitting}>\r\n      {formik.isSubmitting ? submittingText : defaultText}\r\n    </Button>\r\n  )\r\n}\r\n\r\nfunction Login() {\r\n  const { loginWithPhoneNumber } = useAuth();\r\n  const [error, setError] = useState(undefined);\r\n  const [step, setStep] = useState(\"step1\");\r\n  const [confirmationFn, setConfirmationFn] = useState(undefined);\r\n  const [phoneNumberInputRef, setPhoneNumberInputFocus] = useFocus()\r\n  const [verifCodeInputRef, setVerifCodeInputFocus] = useFocus()\r\n\r\n  const formikStep1 = useFormik({\r\n    initialValues: {\r\n      phoneNumber: '',\r\n    },\r\n    validateOnMount: true,\r\n    validationSchema: Yup.object({\r\n      phoneNumber: Yup.string()\r\n        .min(6, 'Invalid phone number')\r\n        .matches(/^[1-9][0-9]+$/, \"Invalid phone number\")\r\n        .required('Required'),\r\n    }),\r\n    onSubmit: (values, formikBag) => {\r\n      setError(undefined);\r\n      loginWithPhoneNumber('+'+values.phoneNumber)\r\n        .then((confirmFn) => {\r\n          // console.log(confirmFn);\r\n          setConfirmationFn(confirmFn)\r\n          setStep(\"step2\");\r\n          formikBag.setSubmitting(false)\r\n          setVerifCodeInputFocus();\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          setError(error.message);\r\n          formikBag.setSubmitting(false)\r\n          setPhoneNumberInputFocus();\r\n        });\r\n    },\r\n  });\r\n\r\n  const formikStep2 = useFormik({\r\n    initialValues: {\r\n      verificationCode: '',\r\n    },  \r\n    validateOnMount: true,\r\n    validationSchema: Yup.object({\r\n      verificationCode: Yup.string()\r\n        .matches(/\\d{6}/, 'Should contain 6 digits')\r\n        .required('Required'),  \r\n    }),\r\n    onSubmit: async (values) => {\r\n      try {\r\n        setError(undefined);\r\n\r\n        if (!confirmationFn) {\r\n          setError(\"Confirmation was not sent. Go back to Step 1.\")\r\n        } else {\r\n          await confirmationFn.confirm(values.verificationCode);\r\n        }\r\n      } catch (error) {\r\n        setError(error.message);\r\n      }\r\n    },\r\n  });\r\n\r\n  // console.log(step, formikStep1);\r\n\r\n  return (\r\n    <>\r\n      <Navigation brandOnly/>\r\n      <Container\r\n        className=\"d-flex align-items-center justify-content-center app-mh-100\"\r\n        style={{ position: 'absolute', top: 0, left: 0, minWidth: \"100vw\" }}\r\n      >\r\n        <div className=\"w-100\" style={{ maxWidth: \"400px\" }}>\r\n          <Tab.Container id=\"left-tabs-example\" activeKey={step}>\r\n            <Tab.Content>\r\n              <Tab.Pane eventKey=\"step1\">\r\n                <Card>\r\n                  <Card.Body>\r\n                    <h2 className=\"text-center mb-4\">Log In</h2>\r\n                    {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                    <Form id=\"form-step1\" noValidate onSubmit={formikStep1.handleSubmit}>\r\n                      <FormikFieldWithPrefix \r\n                        autoFocus\r\n                        id=\"phoneNumber\" \r\n                        label=\"Phone Number (Ex: +1 604 123 456)\" \r\n                        className=\"phone-number-input\"\r\n                        ref={phoneNumberInputRef}\r\n                        required \r\n                        inputMode='numeric'\r\n                        formik={formikStep1} \r\n                      />\r\n                      {/* <FormikButton id=\"sign-in-button\" defaultText=\"Send Verification Code\" submittingText=\"Sending...\" formik={formikStep1} /> */}\r\n                      <Button \r\n                        type=\"submit\" \r\n                        onClick={formikStep1.handleSubmit}\r\n                        id=\"sign-in-button\"\r\n                        className=\"w-100 mt-3\" \r\n                        variant={!formikStep1.isValid || formikStep1.isSubmitting ? \"secondary\" : \"primary\"}\r\n                        disabled={!formikStep1.isValid || formikStep1.isSubmitting}>\r\n                        {formikStep1.isSubmitting ? \"Sending...\" : \"Send Verification Code\"}\r\n                      </Button>\r\n                    </Form>\r\n                  </Card.Body>\r\n                </Card>\r\n              </Tab.Pane>\r\n              <Tab.Pane eventKey=\"step2\">\r\n                <Card>\r\n                  <Card.Body>\r\n                    <h2 className=\"text-center mb-4\">Enter Verification Code </h2>\r\n                    {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                    <Form id=\"form-step2\" noValidate onSubmit={formikStep2.handleSubmit}>\r\n                      <FormikField \r\n                        ref={verifCodeInputRef}\r\n                        id=\"verificationCode\" \r\n                        label=\"\" \r\n                        className=\"verif-code-input\"\r\n                        as={MaskedInput}\r\n                        mask='111111'\r\n                        type=\"text\" \r\n                        required \r\n                        inputMode='numeric'\r\n                        autoComplete=\"new-password\"\r\n                        formik={formikStep2} />\r\n                      <FormikButton id=\"submit-btn-step2\" defaultText=\"Log in\" submittingText=\"Logging in...\" formik={formikStep2} />\r\n                    </Form>\r\n                    <div className=\"text-center w-100 mt-3\">\r\n                      <Link onClick={() => { setStep(\"step1\"); setError(undefined); setPhoneNumberInputFocus();}}>Back to Step 1</Link>\r\n                    </div>\r\n                  </Card.Body>\r\n                </Card>\r\n              </Tab.Pane>\r\n            </Tab.Content>\r\n          </Tab.Container>\r\n        </div>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\nimport { Card, Container, Button } from \"react-bootstrap\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { useFirestoreUser } from \"../context/UserContext\";\r\n\r\nfunction Dashboard() {\r\n  const { logout, authUser } = useAuth();\r\n  const { user } = useFirestoreUser();\r\n  \r\n  const handleLogout = async () => {\r\n      await logout();\r\n  };\r\n\r\n  return (\r\n    <Container\r\n      className=\"d-flex align-items-center justify-content-center\"\r\n    >\r\n      <div className=\"w-100 page-container\">\r\n        <h2 className=\"mb-3\">Profile</h2>\r\n        <Card className=\"page-card\">\r\n          <Card.Body>\r\n            <Card.Text>\r\n              <strong>Name: </strong> {user.name} <br />\r\n              <strong>Email: </strong> {user.email} <br />\r\n              <strong>Phone Number: </strong> {authUser.phoneNumber} <br />\r\n\r\n              <Button className=\"mt-4\" onClick={handleLogout} variant=\"danger\">Logout</Button>\r\n            </Card.Text>\r\n          </Card.Body>\r\n        </Card>\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n","import React from \"react\";\r\nimport { Container, ListGroup } from \"react-bootstrap\";\r\nimport { collection } from 'firebase/firestore';\r\nimport { useFirestoreUser } from \"../context/UserContext\";\r\nimport { useFirestore, useFirestoreCollectionData } from 'reactfire';\r\nimport Moment from 'react-moment'\r\n\r\nfunction Customers() {\r\n  const firestore = useFirestore();\r\n  const { user } = useFirestoreUser();\r\n  const ref = collection(firestore, `users`);\r\n  const { data: players } = useFirestoreCollectionData(ref);\r\n\r\n  return (\r\n    <Container\r\n      className=\"pb-4 d-flex align-items-center justify-content-center\"\r\n    >\r\n      <div className=\"w-100 page-container\">\r\n        <h2 className=\"mb-3\">Registered Players</h2>\r\n\r\n        {players &&\r\n          <ListGroup className=\"mt-4 mlr-clear\">\r\n            {players.filter(p => p.hidden !== true).sort((a, b) => a.joinedAt < b.joinedAt ? 1 : -1).map(player => \r\n              <ListGroup.Item \r\n                key={player.id} \r\n                className=\"d-flex justify-content-between align-items-center\"\r\n                style={{flexDirection: 'column'}}\r\n              >\r\n                <div class=\"d-flex w-100 justify-content-between\">\r\n                  {player.name}\r\n                  <span><small>{player.joinedAt && <>member since <Moment unix fromNow>{parseInt(player.joinedAt/1000)}</Moment></>}</small></span>\r\n                </div>\r\n                {user && user.hidden && <><div><small style={{float: 'left'}}>id: {player.id}</small></div></>}\r\n              </ListGroup.Item>  \r\n            )}\r\n          </ListGroup>\r\n        }\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Customers;\r\n","import { Container, ListGroup, Badge } from \"react-bootstrap\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { collection } from 'firebase/firestore';\r\nimport { useFirestore, useFirestoreCollectionData } from 'reactfire';\r\nimport { useFirestoreUser } from \"../context/UserContext\";\r\nimport moment from 'moment-timezone'\r\n\r\nfunction Customers() {\r\n  const navigate = useNavigate();\r\n  const firestore = useFirestore();\r\n  const { user } = useFirestoreUser();\r\n\r\n  const ref = collection(firestore, `games`);\r\n  const { data: games } = useFirestoreCollectionData(ref);\r\n\r\n  const showHiddenGames = user && user.hidden;\r\n\r\n  const handleOnClick = (id) => () => {\r\n    navigate(`/games/${id}`)\r\n  };\r\n\r\n  return (\r\n    <Container\r\n      className=\"pb-4 d-flex align-items-center justify-content-center\"\r\n    >\r\n      <div className=\"w-100 page-container\">\r\n        <h2 className=\"mb-3\">Games</h2>\r\n\r\n        {games &&\r\n          <ListGroup className=\"mt-4 mlr-clear\">\r\n            {games.filter(g => showHiddenGames || g.hidden !== true).sort((a, b) => a.id < b.id ? 1 : -1).map(game => { \r\n\r\n              const registrationsStarted = game && moment.unix(game.registrationStartDate.seconds).utc().isBefore(moment.utc())\r\n              const registrationsEnded = game && moment.unix(game.registrationEndDate.seconds).utc().isBefore(moment.utc())\r\n              const registrationState = \r\n                (registrationsStarted && registrationsEnded) ? \"Closed\" :\r\n                  (registrationsStarted && !registrationsEnded) ? \"Open\" : \"Opens \" + moment.utc().to(moment.unix(game.registrationStartDate.seconds).utc()); \r\n              const registrationColor = \r\n                (registrationsStarted && registrationsEnded) ? \"danger\" :\r\n                  (registrationsStarted && !registrationsEnded) ? \"success\" : \"info\"; \r\n\r\n              return (\r\n                <ListGroup.Item \r\n                  key={game.id} \r\n                  onClick={handleOnClick(game.id)}\r\n                  className=\"d-flex justify-content-between align-items-center\"\r\n                >\r\n                  {game.id}\r\n\r\n                  <div>\r\n                  {game.hidden && \r\n                    <Badge size={24} className=\"float-right\" bg=\"warning\" text=\"light\" pill>\r\n                      hidden\r\n                    </Badge>\r\n                  }\r\n                  <Badge size={24} className=\"float-right\" bg={registrationColor} text=\"light\" pill>\r\n                    {registrationState}\r\n                  </Badge>\r\n                  </div>\r\n                  <Badge size={24} bg=\"light\" variant=\"primary\" style={{fontSize: '100%'}}>\r\n                    {game.players.length} / {game.maxPlayers + game.maxSubs}\r\n                  </Badge>\r\n                </ListGroup.Item>  \r\n              )\r\n            })}\r\n          </ListGroup>\r\n        }\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Customers;\r\n","import React from \"react\";\r\nimport { Button } from 'react-bootstrap'\r\n\r\nfunction GameThumbnail({ players }) {\r\n  const canvas = React.useRef();\r\n\r\n  React.useEffect(() => {\r\n    const context = canvas.current.getContext('2d');\r\n    draw(context);\r\n  });\r\n\r\n  const roundedImage = (context, x, y, width, height, radius) => {\r\n    context.beginPath();\r\n    context.moveTo(x + radius, y);\r\n    context.lineTo(x + width - radius, y);\r\n    context.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n    context.lineTo(x + width, y + height - radius);\r\n    context.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n    context.lineTo(x + radius, y + height);\r\n    context.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n    context.lineTo(x, y + radius);\r\n    context.quadraticCurveTo(x, y, x + radius, y);\r\n    context.closePath();\r\n  }\r\n\r\n  function boxShadow(ctx, image, shadowValues){\r\n\r\n    const {box: {posX: x, posY: y, width: boxW, height: boxH}, offsetX, offsetY, blurRadius, spreadRadius, color} = shadowValues;\r\n    \r\n    // We draw the shadow\r\n    ctx.save();\r\n    const scaleFactor = 1;// ((2 * spreadRadius) + boxW) / boxW;\r\n    // ctx.scale(scaleFactor, scaleFactor);\r\n    ctx.shadowColor = color;\r\n    ctx.shadowBlur = blurRadius;\r\n    ctx.shadowOffsetX = offsetX + canvas.current.width;\r\n    ctx.shadowOffsetY = offsetY + canvas.current.height;  \r\n    ctx.fillStyle = '#2465D3'\r\n    // console.log(scaleFactor, (x - spreadRadius - canvas.current.width) / scaleFactor, (y - spreadRadius - canvas.current.height) / scaleFactor)\r\n    // ctx.fillRect((x - spreadRadius - canvas.current.width) / scaleFactor, (y - spreadRadius - canvas.current.height) / scaleFactor, boxW, boxH);\r\n    // ctx.fillRect(-482, -482, boxW, boxH);\r\n    roundedImage(ctx, (x - spreadRadius - canvas.current.width) / scaleFactor, (y - spreadRadius - canvas.current.height) / scaleFactor, boxW, boxH, 30);\r\n    \r\n    // roundedImage(ctx, (x - spreadRadius - canvas.current.width) / scaleFactor, (y - spreadRadius - canvas.current.height) / scaleFactor, boxW, boxH);\r\n    // roundedImage(ctx, 30, 30, boxW, boxH, 40);\r\n    ctx.fillStyle = '#2465D3'\r\n      // ctx.lineWidth = 25;\r\n    ctx.fill()\r\n    ctx.clip();\r\n\r\n    // ctx.drawImage(image, -30, 30, boxW, boxH);\r\n    ctx.restore();\r\n    // We draw the original box\r\n    // ctx.clearRect(x, y, boxW, boxH);\r\n    // ctx.rect(x, y, boxW, boxH);\r\n    // ctx.stroke();\r\n  }\r\n\r\n  const draw = context => {\r\n    // context.beginPath();\r\n    // context.arc(\r\n    //   canvas.current.width / 2,\r\n    //   canvas.current.height / 2,\r\n    //   canvas.current.width / 2,\r\n    //   0,\r\n    //   2 * Math.PI\r\n    // );\r\n    // context.fill();\r\n\r\n    const image = new Image();\r\n    image.src =\r\n      \"/thumbnail_bg.jpg\";\r\n    image.onload = () => {\r\n\r\n      const imgw = 378\r\n      const imgh = 567\r\n      const offset=5\r\n      const border=5\r\n      // console.log(imgw, imgh, offset, border)\r\n      // context.save();\r\n      // roundedImage(context, 0, 0, imgw+90, imgh+90, 40);\r\n      // context.strokeStyle = '#2465D3'\r\n      // context.lineWidth = 25;\r\n      // context.stroke()\r\n      // context.clip();\r\n      // context.drawImage(image, 30, 30, imgw, imgh);\r\n      // context.restore();\r\n\r\n      const case1 = {box: {posX: offset, posY: offset, width: imgw, height: imgh}, offsetX: 0, offsetY: 0, blurRadius: 5, spreadRadius: 0, color: '#000000'};\r\n      boxShadow(context, image, case1);\r\n      // context.drawImage(image, 0, 0, 270, 405);\r\n\r\n      context.save();\r\n      roundedImage(context, offset + border/2, offset + border/2, imgw-border, imgh-border, 30);\r\n      context.strokeStyle = '#185b8f'\r\n      context.lineWidth = border;\r\n      context.globalAlpha = 1;\r\n      context.stroke()\r\n      context.clip();\r\n      context.globalAlpha = 1;\r\n      context.drawImage(image, offset, offset, imgw, imgh);\r\n      context.restore();\r\n\r\n      context.fillStyle = '#ffffff'\r\n      context.font = '16px \"Arial\"';\r\n      \r\n      const offset1Quarter = offset + border/2 + 12;\r\n      const offset2Quarters = offset + imgw/2;\r\n      // const offset3Quarters = offset - border/2 + imgw - 12; \r\n      const topOffset = 150;\r\n      // context.fillRect(offset - border/2 + imgw, 0, 2, imgh);\r\n      // context.fillRect(217, 0, 2, imgh);\r\n      // context.fillRect(offset + border/2, 0, 2, imgh);\r\n\r\n      const getPlayerName = (name) => {\r\n        return name.length < 17 ? name : (name.substring(0, 15) + '...') \r\n      }\r\n\r\n      const lineHeight = 14;\r\n      for (var i = 0; i < players.length; i+=2) {\r\n        context.shadowColor=\"#040404\";\r\n        context.shadowBlur=0;\r\n        context.lineWidth=2;\r\n        context.textAlign = \"start\";\r\n        context.strokeText((i+1) + '. ' + getPlayerName(players[i].name), offset1Quarter, topOffset + i*lineHeight);\r\n        context.fillStyle = 'white'\r\n        context.fillText((i+1) + '. ' + getPlayerName(players[i].name), offset1Quarter, topOffset + i*lineHeight);\r\n\r\n        if (players[i+1]) {\r\n          context.shadowColor=\"#040404\";\r\n          context.shadowBlur=0;\r\n          context.lineWidth=2;\r\n          context.textAlign = \"start\";\r\n          context.strokeText((i+2) + '. ' + getPlayerName(players[i+1].name), offset2Quarters+6, topOffset + i*lineHeight);\r\n          context.fillStyle = 'white'\r\n          context.fillText((i+2) + '. ' + getPlayerName(players[i+1].name), offset2Quarters+6, topOffset + i*lineHeight);\r\n        }\r\n      }\r\n\r\n      context.textAlign = \"center\";\r\n      context.font = '32px \"Lucida Handwriting\"';\r\n      context.shadowColor=\"#040404\";\r\n      context.shadowBlur=2;\r\n      context.lineWidth=0;\r\n      context.strokeText('Thursday', offset2Quarters, 60);\r\n      context.strokeText('9:25 PM - 11:00 PM', offset2Quarters, 100);\r\n      context.fillStyle = 'white'\r\n      // context.lineWidth = 25;\r\n      context.fillText('Thursday', offset2Quarters, 60);\r\n      context.fillText('9:25 PM - 11:00 PM', offset2Quarters, 100);\r\n    };\r\n  };\r\n\r\n  const handleShare = async () => {\r\n    canvas.current.toBlob(async (blob) => {\r\n      const data = {\r\n        files: [\r\n          new File([blob], 'image.png', {\r\n            type: blob.type,\r\n          }),\r\n        ],\r\n      };\r\n  \r\n      try {\r\n        if (!(navigator.canShare(data))) {\r\n          throw new Error('Can\\'t share data.', data);\r\n        };\r\n\r\n        await navigator.share(data);\r\n     } catch (err) {\r\n       console.error(err);\r\n     }\r\n  });\r\n    \r\n}\r\n\r\n  return (\r\n    <div className=\"d-flex flex-column justify-content-center\">\r\n      <canvas className=\"p-2 p-lg-5\" ref={canvas} height=\"577px\" width=\"390px\" />\r\n      <Button onClick={handleShare}>Share</Button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GameThumbnail;\r\n","import React from \"react\";\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { Container, Button, ListGroup, Spinner, Card, Badge, Form } from \"react-bootstrap\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { useFirestoreUser } from \"../context/UserContext\";\r\nimport { doc, arrayUnion, arrayRemove, Timestamp, runTransaction } from 'firebase/firestore';\r\nimport { useFirestore, useFirestoreDocData } from 'reactfire';\r\nimport Moment from 'react-moment'\r\nimport moment from 'moment-timezone'\r\nimport GameThumbnail from \"../components/GameThumbnail\";\r\n\r\nconst fmtTime = (ts, fmt) => {\r\n  return moment.tz(moment.unix(ts), 'America/Vancouver').format(fmt);\r\n}\r\n\r\nfunction GameDetails() {\r\n  let { cid } = useParams();\r\n  const { authUser } = useAuth();\r\n  const { user } = useFirestoreUser();\r\n  const firestore = useFirestore();\r\n\r\n  const ref = doc(firestore, `games/${cid}`);\r\n  const { data: game } = useFirestoreDocData(ref);\r\n\r\n  const loading = !game;\r\n  const [actionInProgress, setActionInProgress] = React.useState(false);\r\n  \r\n  const alreadyRegistered = game && game.players.some(p => p.id === user.id);\r\n  const isGameFull = game && game.players.length === game.maxPlayers + game.maxSubs;\r\n  const registrationsStarted = game && moment.unix(game.registrationStartDate.seconds).utc().isBefore(moment.utc())\r\n  const registrationsLate = game && game.registrationLateDate && moment.unix(game.registrationLateDate.seconds).utc().isBefore(moment.utc())\r\n  const registrationsEnded = game && moment.unix(game.registrationEndDate.seconds).utc().isBefore(moment.utc())\r\n  const isAuthUserOrganizer = authUser && game && authUser.uid === game.organizerId;\r\n\r\n  const delay = ms => new Promise(res => setTimeout(res, ms));\r\n\r\n  const handleShowCustomerAddModal = async () => {\r\n    const me = {id: user.id, name: user.name};\r\n    const hist = alreadyRegistered ? `${user.name} unregistered.` : `${user.name} registered for the game.`;\r\n    \r\n    setActionInProgress(true);\r\n    \r\n    await runTransaction(firestore, async (transaction) => {\r\n      const gameRef = await transaction.get(ref);\r\n      const gameData = gameRef.data();\r\n\r\n      if (!alreadyRegistered && gameData.players.length === gameData.maxPlayers + gameData.maxSubs) {\r\n        return Promise.reject(\"Sorry, game is already full :(\");\r\n      }\r\n\r\n      transaction.update(ref, {\r\n        players: alreadyRegistered ? arrayRemove(me) : arrayUnion(me),\r\n        history: arrayUnion({description: hist, date: Timestamp.now()}),\r\n        lateCancellations: alreadyRegistered && registrationsLate ? arrayUnion(me) : arrayRemove(me), \r\n      });\r\n    });\r\n    \r\n    setActionInProgress(false);\r\n  };\r\n\r\n  const handleOnPayment = (id) => async () => {\r\n    await runTransaction(firestore, async (transaction) => {\r\n      const gameRef = await transaction.get(ref);\r\n      const gameData = gameRef.data();\r\n      const alreadyChecked = gameData.payments && gameData.payments.includes(id)\r\n      transaction.update(ref, {\r\n        payments: alreadyChecked ? arrayRemove(id) : arrayUnion(id),\r\n        // history: arrayUnion({description: hist, date: Timestamp.now()})\r\n      });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Container\r\n      className=\"pb-4 d-flex align-items-center justify-content-center\"\r\n    >\r\n      <div className=\"w-100 page-container\">\r\n        <h2 className=\"mb-4\">\r\n          <Link to=\"/games\">Games</Link> / {game && game.id}\r\n        </h2>\r\n\r\n        {loading && \r\n          <Container\r\n            className=\"d-flex align-items-center justify-content-center app-mh-100\"\r\n            style={{ position: 'absolute', top: 0, left: 0, minWidth: \"100vw\" }}\r\n          >\r\n            <Spinner animation=\"border\" variant=\"primary\" />\r\n          </Container>\r\n        }\r\n\r\n        {!loading && \r\n          <>\r\n            <Card className=\"page-card\">\r\n              <Card.Body>\r\n                <Card.Text>\r\n                  <strong>Date: </strong> Thursday 9:25 PM - 11:00 PM <br />\r\n                  <strong>Place: </strong> UBC Turf Mini Fields with lights <br /><br />\r\n                  All players pay <mark><b>$6</b></mark>. Please bring cash or e-transfer to <mark><b>{game.organizerEmail || \"ghaffarisahand@gmail.com\"}</b></mark>.<br /><br />\r\n                  Cancellations after <mark><b>5:30 PM</b></mark> on the game night are subject to penalty. <br /><br />\r\n                  Registration is not allowed if there are outstanding payments from previous weeks.\r\n                </Card.Text>\r\n              </Card.Body>\r\n            </Card>\r\n\r\n            {!registrationsStarted && \r\n              <div className=\"callout mlr-clear\">\r\n                <h5>Registration is not open yet.</h5>\r\n                <p className=\"mb-0\">\r\n                  Registration will start on Tuesday at <mark><b>{fmtTime(game.registrationStartDate.seconds, 'h:mm A z')}</b></mark> and be open \r\n                  until <mark><b>{fmtTime(game.registrationEndDate.seconds, 'h:mm A z')}</b></mark> on Thursday. \r\n                </p>\r\n              </div>\r\n            }\r\n\r\n            {registrationsStarted && !registrationsEnded && \r\n              <>\r\n                <div className=\"callout-success mlr-clear\">\r\n                  <h5>Registration is now open.</h5>\r\n                  <p className=\"mb-0\">Registration will be closed on the game day at {fmtTime(game.registrationEndDate.seconds, 'h:mm A z')}.</p>\r\n                </div>\r\n\r\n                {!alreadyRegistered && isGameFull &&\r\n                  <div className=\"callout mlr-clear\">\r\n                    <h5>Sorry, game is full :(</h5>\r\n                    <p className=\"mb-0\">Check back here later in case someone cancels their registration.</p>\r\n                  </div>\r\n                }\r\n\r\n                {registrationsLate && alreadyRegistered &&\r\n                  <div className=\"callout mlr-clear\">\r\n                    <h5>Late cancellation penalty is in place. </h5>\r\n                    <p className=\"mb-0\">If you are going to cancel your registration now, please note that you still have to pay for the game.</p>\r\n                  </div>\r\n                }\r\n\r\n                <Button \r\n                  onClick={handleShowCustomerAddModal} \r\n                  variant={alreadyRegistered ? \"danger\" : isGameFull ? \"secondary\" : \"primary\"} \r\n                  disabled={actionInProgress || (!alreadyRegistered && isGameFull)}\r\n                >\r\n                  {actionInProgress && <Spinner as=\"span\" animation=\"border\" size=\"sm\" role=\"status\" aria-hidden=\"true\" className=\"mr-2\" />}\r\n                  {alreadyRegistered ? \"Cancel Registration\" : \"Register\"}\r\n                </Button>\r\n              </>\r\n            }\r\n    \r\n            {registrationsStarted && registrationsEnded && \r\n              <div className=\"callout-danger mlr-clear\">\r\n                <h5>Registration is currently closed for this game.</h5>\r\n                {/* <p className=\"mb-0\">Registration is currently closed for this game.</p> */}\r\n              </div>\r\n            }\r\n\r\n            {game && game.lateCancellations && game.lateCancellations.length > 0 && \r\n              <>\r\n                <h4 className=\"mt-4\">Late Cancellations</h4>\r\n                <ListGroup as=\"ol\" numbered className=\"mlr-clear mt-2 mb-1\">\r\n                  {isAuthUserOrganizer &&\r\n                    <ListGroup.Item as=\"div\" className=\"d-flex justify-content-between align-items-center\">\r\n                      {<strong className=\"ml-4\">Name</strong>}\r\n                      {<strong>Tags</strong>}\r\n                      {<strong>Paid?</strong>}\r\n                    </ListGroup.Item>  \r\n                  }\r\n                  {Array.from(Array(game.lateCancellations).keys()).map(i => \r\n                    <ListGroup.Item key={i} as=\"li\" className=\"d-flex justify-content-between align-items-center\">\r\n                      {game.lateCancellations[i] && \r\n                        <>\r\n                          {game.lateCancellations[i].id === authUser.uid && <strong>{game.lateCancellations[i].name}</strong>}\r\n                          {game.lateCancellations[i].id !== authUser.uid && game.lateCancellations[i].name}\r\n\r\n                          {isAuthUserOrganizer && \r\n                            <Form.Check \r\n                              onChange={handleOnPayment(game.lateCancellations[i].id)} \r\n                              type=\"checkbox\" \r\n                              checked={game.payments ? game.payments.includes(game.lateCancellations[i].id) : false}\r\n                              className=\"ml-4 float-right\" \r\n                              label=\"\"\r\n                            />}\r\n                          {game.payments && game.payments.includes(game.lateCancellations[i].id) && <Badge className=\"float-right\" text=\"light\" bg=\"success\" pill>Paid</Badge>}\r\n                          {game.lateCancellations[i].id === game.organizerId && <Badge className=\"float-right\" text=\"light\" bg=\"info\" pill>Organizer</Badge>}\r\n                        </>\r\n                      }\r\n                    </ListGroup.Item>  \r\n                  )}\r\n                </ListGroup>\r\n              </>\r\n            }\r\n\r\n            <h4 className=\"mt-4\">Players</h4>\r\n            {game && game.players &&\r\n              <ListGroup as=\"ol\" numbered className=\"mlr-clear mt-2 mb-1\">\r\n                {isAuthUserOrganizer &&\r\n                  <ListGroup.Item as=\"div\" className=\"d-flex justify-content-between align-items-center\">\r\n                    {<strong className=\"ml-4\">Name</strong>}\r\n                    {<strong>Tags</strong>}\r\n                    {<strong>Paid?</strong>}\r\n                  </ListGroup.Item>  \r\n                }\r\n                {Array.from(Array(game.maxPlayers).keys()).map(i => \r\n                  <ListGroup.Item key={i} as=\"li\" className=\"d-flex justify-content-between align-items-center\">\r\n                    {game.players[i] && \r\n                      <>\r\n                        {game.players[i].id === authUser.uid && <strong>{game.players[i].name}</strong>}\r\n                        {game.players[i].id !== authUser.uid && game.players[i].name}\r\n\r\n                        {isAuthUserOrganizer && \r\n                          <Form.Check \r\n                            onChange={handleOnPayment(game.players[i].id)} \r\n                            type=\"checkbox\" \r\n                            checked={game.payments ? game.payments.includes(game.players[i].id) : false}\r\n                            className=\"ml-4 float-right\" \r\n                            label=\"\"\r\n                          />}\r\n                        {game.payments && game.payments.includes(game.players[i].id) && <Badge className=\"float-right\" text=\"light\" bg=\"success\" pill>Paid</Badge>}\r\n                        {game.players[i].id === game.organizerId && <Badge className=\"float-right\" text=\"light\" bg=\"info\" pill>Organizer</Badge>}\r\n                      </>\r\n                    }\r\n                  </ListGroup.Item>  \r\n                )}\r\n              </ListGroup>\r\n            }\r\n\r\n            <h4 className=\"mt-4\">Subs</h4>\r\n            {game && game.players &&\r\n              <ListGroup as=\"ol\" numbered className=\"mlr-clear mt-2 mb-1\">\r\n                {isAuthUserOrganizer &&\r\n                  <ListGroup.Item as=\"div\" className=\"d-flex justify-content-between align-items-center\">\r\n                    {<strong className=\"ml-4\">Name</strong>}\r\n                    {<strong>Tags</strong>}\r\n                    {<strong>Paid?</strong>}\r\n                  </ListGroup.Item>  \r\n                }\r\n                {Array.from(Array(game.maxSubs).keys()).map(i => {\r\n                  const idx = game.maxPlayers + i;\r\n                  return (\r\n                    <ListGroup.Item key={idx} as=\"li\" className=\"d-flex justify-content-between align-items-center\">\r\n                      {game.players[idx] && \r\n                        <>\r\n                          {game.players[idx].id === authUser.uid && <strong>{game.players[idx].name}</strong>}\r\n                          {game.players[idx].id !== authUser.uid && game.players[idx].name}\r\n\r\n                          {isAuthUserOrganizer && \r\n                            <Form.Check \r\n                              onChange={handleOnPayment(game.players[idx].id)} \r\n                              type=\"checkbox\" \r\n                              checked={game.payments ? game.payments.includes(game.players[idx].id) : false}\r\n                              className=\"ml-4 float-right\" \r\n                              label=\"\"\r\n                            />}\r\n                          {game.payments && game.payments.includes(game.players[idx].id) && <Badge className=\"float-right\" text=\"light\" bg=\"success\" pill>Paid</Badge>}\r\n                          {game.players[idx].id === game.organizerId && <Badge className=\"float-right\" text=\"light\" bg=\"info\" pill>Organizer</Badge>}\r\n                        </>\r\n                      }\r\n                    </ListGroup.Item>\r\n                  )}\r\n                )}\r\n              </ListGroup>\r\n            }\r\n\r\n            <h4 className=\"mt-4\">Share</h4>\r\n            {game && <GameThumbnail players={game.players}/>}\r\n\r\n            <h4 className=\"mt-4\">History</h4>\r\n            {game && game.history && registrationsStarted &&\r\n              <ListGroup variant=\"flush\" className=\"app-timeline mt-2 mb-1\">\r\n                {game.history.sort((a, b) => a.date >= b.date ? 1 : -1).map((i, idx) => {\r\n                  return (\r\n                    <ListGroup.Item className=\"app-timeline-li\" key={i.date.seconds + '_' + i.date.nanoseconds + '_' + idx} >\r\n                      <small><Moment unix format=\"M/D h:mm A\" className=\"text-secondary mr-4\">{i.date.seconds}</Moment></small>\r\n                      {i.description} \r\n                    </ListGroup.Item>  \r\n                  )\r\n                }\r\n                )}\r\n              </ListGroup>\r\n            }\r\n          </>\r\n        }\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default GameDetails;\r\n","import React, { useRef, useState } from \"react\";\r\nimport { Form, Container, Card, Button, Alert } from \"react-bootstrap\";\r\nimport Navigation from '../layout/Navigation';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\n\r\nfunction Login() {\r\n  const emailRef = useRef(null);\r\n  const { resetPassword } = useAuth();\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      setMessage(\"\");\r\n      setLoading(true);\r\n      setError(\"\");\r\n      await resetPassword(emailRef.current.value);\r\n      setMessage(\"check your inbox for futher instructions\");\r\n    } catch (error) {\r\n      setError(\"failed to reset password\");\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navigation brandOnly/>\r\n      <Container\r\n        className=\"d-flex align-items-center justify-content-center app-mh-100\"\r\n        style={{ position: 'absolute', top: 0, left: 0, minWidth: \"100vw\" }}\r\n      >\r\n        <div className=\"w-100\" style={{ maxWidth: \"400px\" }}>\r\n          <Card>\r\n            <Card.Body>\r\n              <h2 className=\"text-center mb-4\">Password Reset</h2>\r\n              {error && <Alert variant=\"danger\">{error}</Alert>}\r\n              {message && <Alert variant=\"success\">{message}</Alert>}\r\n              <Form onSubmit={handleSubmit}>\r\n                <Form.Group id=\"email\">\r\n                  <Form.Label>Email</Form.Label>\r\n                  <Form.Control type=\"email\" required ref={emailRef}></Form.Control>\r\n                </Form.Group>\r\n                <Button type=\"submit\" className=\"w-100 mt-3\" disabled={loading}>\r\n                  Reset password\r\n                </Button>\r\n              </Form>\r\n              <div className=\"text-center w-100 mt-3\">\r\n                <Link to=\"/login\">Log In</Link>\r\n              </div>\r\n            </Card.Body>\r\n          </Card>\r\n          <div className=\"text-center w-100 mt-2\">\r\n            Not registered yet? <Link to=\"/signup\">Sign Up</Link>\r\n          </div>\r\n        </div>\r\n      </Container>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useState } from \"react\";\r\nimport { Container, Button, Spinner, Form, Alert } from \"react-bootstrap\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport { useFirestoreUser } from \"../context/UserContext\";\r\nimport { doc, setDoc, getDoc } from 'firebase/firestore';\r\nimport { useFirestore } from 'reactfire';\r\nimport moment from 'moment-timezone'\r\nimport { Navigate } from \"react-router-dom\";\r\nimport * as Yup from 'yup';\r\nimport { useFormik } from 'formik';\r\n\r\nfunction AdminPanel() {\r\n  const { authUser } = useAuth();\r\n  const { user } = useFirestoreUser();\r\n  const firestore = useFirestore();\r\n  const [error, setError] = useState(undefined);\r\n  const [success, setSuccess] = useState(undefined);\r\n\r\n  const loading = !authUser || !user;\r\n\r\n  const handleNewGame = async ({ date: gameDate, maxPlayers, maxSubs }) => {\r\n\r\n    // let gameDate = \"2022-10-27\";\r\n    let regStartDate = moment(gameDate).add(-2, \"days\").format(\"yyyy-MM-DD\");\r\n    let regEndDate = gameDate;\r\n    let organizerId = 'lBIUIcVvszNu2cGK0TwhBldZaqC3';\r\n    let organizerEmail = 'ghaffarisahand@gmail.com';\r\n    let organizerName = 'Sahand Ghaffari';\r\n    let paymentPerPlayer = '6';\r\n\r\n    if (moment(gameDate).utc().isBefore(moment.utc())) {\r\n      throw new Error(\"Can't add a date from the past.\");\r\n    }\r\n    \r\n    const ref = doc(firestore, `games`, gameDate);\r\n    const refData = await getDoc(ref);\r\n    if (refData.exists()) {\r\n      throw new Error(\"Can't add an existing game. Double check the date.\");\r\n    }\r\n\r\n    await setDoc(ref, {\r\n      history: [{\r\n        date: moment.tz(`${regStartDate} 12:00`, 'America/Vancouver').toDate(),\r\n        description: \"Game is open for registration.\"\r\n      }, {\r\n        date: moment.tz(`${regStartDate} 12:00`, 'America/Vancouver').toDate(),\r\n        description: \"Sahand Ghaffari is automatically registered as the organizer.\"\r\n      }],\r\n      id: gameDate,\r\n      maxPlayers: maxPlayers,\r\n      maxSubs: maxSubs,\r\n      organizerId: organizerId,\r\n      organizerEmail: organizerEmail,\r\n      paymentPerPlayer: paymentPerPlayer,\r\n      payments: [],\r\n      lateCancellations: [],\r\n      players: [{id: organizerId, name: organizerName}],\r\n      registrationStartDate: moment.tz(`${regStartDate} 12:00`, 'America/Vancouver').toDate(),\r\n      registrationLateDate: moment.tz(`${regEndDate} 17:30`, 'America/Vancouver').toDate(),\r\n      registrationEndDate:  moment.tz(`${regEndDate} 20:30`, 'America/Vancouver').toDate(),\r\n    });\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      date: '',\r\n      maxPlayers: 20,\r\n      maxSubs: 4,\r\n    },\r\n    validateOnMount: true,\r\n    validationSchema: Yup.object({\r\n      date: Yup.string()\r\n        .min(4, 'Must be at least 4 characters')\r\n        .required('Required'),\r\n    }),\r\n    onSubmit: async (values) => {\r\n      try {\r\n        setError(undefined);\r\n        setSuccess(undefined);\r\n        await handleNewGame(values);\r\n        setSuccess(\"Game is created successfully.\");\r\n      } catch (error) {\r\n        setError(error.message);\r\n      }\r\n    },\r\n  });\r\n\r\n  if (!user.hidden) {\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  return (\r\n    <Container\r\n      className=\"pb-4 d-flex align-items-center justify-content-center\"\r\n    >\r\n      <div className=\"w-100 page-container\">\r\n        <h2 className=\"mb-4\">\r\n          Admin Panel\r\n        </h2>\r\n\r\n        {loading && \r\n          <Container\r\n            className=\"d-flex align-items-center justify-content-center app-mh-100\"\r\n            style={{ position: 'absolute', top: 0, left: 0, minWidth: \"100vw\" }}\r\n          >\r\n            <Spinner animation=\"border\" variant=\"primary\" />\r\n          </Container>\r\n        }\r\n\r\n        {!loading && \r\n          <>\r\n            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n            {success && <Alert variant=\"success\">{success}</Alert>}\r\n            <Form noValidate onSubmit={formik.handleSubmit}>\r\n              <Form.Group>\r\n                <Form.Label>Game Date</Form.Label>\r\n                <Form.Control\r\n                  id=\"date\"\r\n                  type=\"text\"\r\n                  placeholder=\"2022-10-29\" \r\n                  required \r\n                  value={formik.values.date} \r\n                  onChange={formik.handleChange}\r\n                  onBlur={formik.handleBlur}\r\n                  isInvalid={formik.touched.date && formik.errors.date}\r\n                  isValid={formik.touched.date && !formik.errors.date}\r\n                ></Form.Control>\r\n                <Form.Control.Feedback type=\"invalid\">\r\n                  {formik.errors.date}\r\n                </Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Players</Form.Label>\r\n                <Form.Control\r\n                  id=\"maxPlayers\"\r\n                  type=\"number\"\r\n                  required \r\n                  value={formik.values.maxPlayers} \r\n                  onChange={formik.handleChange}\r\n                  onBlur={formik.handleBlur}\r\n                  isInvalid={formik.touched.maxPlayers && formik.errors.maxPlayers}\r\n                  isValid={formik.touched.maxPlayers && !formik.errors.maxPlayers}\r\n                ></Form.Control>\r\n                <Form.Control.Feedback type=\"invalid\">\r\n                  {formik.errors.maxPlayers}\r\n                </Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Form.Group>\r\n                <Form.Label>Subs</Form.Label>\r\n                <Form.Control\r\n                  id=\"maxSubs\"\r\n                  type=\"number\"\r\n                  required \r\n                  value={formik.values.maxSubs} \r\n                  onChange={formik.handleChange}\r\n                  onBlur={formik.handleBlur}\r\n                  isInvalid={formik.touched.maxSubs && formik.errors.maxSubs}\r\n                  isValid={formik.touched.maxSubs && !formik.errors.maxSubs}\r\n                ></Form.Control>\r\n                <Form.Control.Feedback type=\"invalid\">\r\n                  {formik.errors.maxSubs}\r\n                </Form.Control.Feedback>\r\n              </Form.Group>\r\n              <Button \r\n                type=\"submit\" \r\n                className=\"mt-3\" \r\n                variant={!formik.isValid || formik.isSubmitting ? \"secondary\" : \"primary\"}\r\n                disabled={!formik.isValid || formik.isSubmitting}>\r\n                {formik.isSubmitting ? \"Creating...\" : \"Create New Game\"}\r\n              </Button>\r\n            </Form>\r\n          </>\r\n        }\r\n      </div>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default AdminPanel;\r\n","import React from \"react\";\r\nimport { BrowserRouter as Router, Route, Routes, Navigate } from \"react-router-dom\";\r\n\r\nimport PrivateRoute from \"./layout/PrivateRoute\";\r\nimport UnsignedRoute from \"./layout/UnsignedRoute\";\r\nimport AppLayout from \"./layout/AppLayout\";\r\n\r\n// import Login from \"./pages/Login\";\r\nimport LoginWithPhone from \"./pages/LoginWithPhone\";\r\n// import SignUp from \"./pages/Signup\";\r\nimport Profile from \"./pages/Profile\";\r\nimport AllPlayers from \"./pages/AllPlayers\";\r\nimport Games from \"./pages/Games\";\r\nimport GameDetails from \"./pages/GameDetails\";\r\nimport ForgetPassword from \"./pages/ForgetPassword\";\r\nimport AdminPanel from \"./pages/AdminPanel\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"app-mh-100\">\r\n      <Router>\r\n        <Routes>\r\n          {/* <Route exact path=\"/signup\" element={<UnsignedRoute><SignUp /></UnsignedRoute>} /> */}\r\n          <Route exact path=\"/login\" element={<UnsignedRoute><LoginWithPhone /></UnsignedRoute>} />\r\n          <Route exact path=\"/forget-password\" element={<UnsignedRoute><ForgetPassword /></UnsignedRoute>} />\r\n\r\n          <Route path=\"/\" element={<PrivateRoute><AppLayout /></PrivateRoute>}>\r\n            <Route path=\"\" element={<Navigate to=\"/games\" replace />} />\r\n            <Route path=\"profile\" element={<Profile />} />\r\n            <Route path=\"allplayers\" element={<AllPlayers />} />\r\n            <Route path=\"admin\" element={<AdminPanel />} />\r\n            <Route path=\"games\" element={<Games />} />\r\n            <Route path=\"games/:cid\" element={<GameDetails />} />\r\n          </Route>\r\n        </Routes>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport './scss/theme.scss';\r\n\r\nimport { AuthProvider } from \"../src/context/AuthContext\";\r\nimport { UserProvider } from \"../src/context/UserContext\";\r\n\r\nimport { getFirestore } from 'firebase/firestore';\r\nimport { FirebaseAppProvider, FirestoreProvider, useFirebaseApp } from 'reactfire';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTHDOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n};\r\n\r\nfunction FirebaseComponents() {\r\n  const app = useFirebaseApp(); \r\n  const database = getFirestore(app);\r\n  // const auth = getAuth(app);\r\n\r\n  return (\r\n    <AuthProvider>\r\n      <FirestoreProvider sdk={database}>\r\n          <UserProvider>\r\n            <App />\r\n          </UserProvider>\r\n      </FirestoreProvider>\r\n    </AuthProvider>\r\n  );\r\n}\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n      <FirebaseAppProvider firebaseConfig={firebaseConfig}>\r\n        <FirebaseComponents />\r\n      </FirebaseAppProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}